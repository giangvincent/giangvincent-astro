---
import { Image } from 'astro:assets';
import type { ImageMetadata } from 'astro';
import FormattedDate from '../components/FormattedDate.astro';
import PixelLayout from '../components/pixel/PixelLayout.astro';

type Props = {
	title: string;
	description?: string;
	pubDate: Date;
	updatedDate?: Date;
	heroImage?: ImageMetadata;
	heroImageUrl?: string;
};

const { title, description, pubDate, updatedDate, heroImage, heroImageUrl } = Astro.props as Props;

const navItems = [{ id: 'article', label: 'Entry' }];
---

<PixelLayout
	pageTitle={`${title} | Blog`}
	description={description ?? title}
	navItems={navItems}
	listRoute="/blog"
	sidebarIntro="Scroll the log or jump to the section you need."
>
	<section id="article" class="pixel-panel">
		<p class="pixel-panel-label">Log Entry</p>
		<div class="pixel-hero">
			{heroImage && <Image width={1200} height={600} src={heroImage} alt="" />}
			{
				!heroImage && heroImageUrl && (
					<img alt={title + 'Cover'} src={heroImageUrl} alt="" loading="lazy" width="1200" height="600" />
				)
			}
			<h1>{title}</h1>
			{description && <p class="pixel-tagline">{description}</p>}
			<div class="pixel-meta-grid">
				<div>
					<div class="pixel-meta-title">Published</div>
					<FormattedDate date={pubDate} />
				</div>
				{
					updatedDate && (
						<div>
							<div class="pixel-meta-title">Updated</div>
							<FormattedDate date={updatedDate} />
						</div>
					)
				}
			</div>
		</div>
		<div class="pixel-article-body">
			<slot />
		</div>
	</section>
</PixelLayout>
